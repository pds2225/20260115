# README_PATCH.md - 비개발자용 업데이트 요약

> **문서 버전**: v1.0  
> **최종 수정**: 2026-01-26  
> **대상 독자**: 비개발자 (기획자, PM, 운영자)

---

## 📋 이번 업데이트 요약 (1페이지)

### 무엇을 고쳤나요?

| 항목 | 변경 내용 |
|------|-----------|
| **고정 5개국 제거** | 이전에는 API 실패 시 무조건 미국·중국·베트남·일본·독일만 추천했습니다. 이제는 **캐시된 실제 데이터**를 먼저 시도하고, 그것도 없을 때만 기본 국가를 보여줍니다. |
| **제재국 필터링 추가** | 북한·이란·시리아·쿠바는 **추천/매칭/시뮬레이션 모든 결과에서 제외**됩니다. 법적 리스크 차단. |
| **제한국 경고 추가** | 러시아·벨라루스 등은 결과에 포함하되 **"수출 허가 필요" 경고**와 함께 점수 감점(-10점)을 적용합니다. |
| **거래 불가 조건 강화** | MOQ(최소주문수량)가 30% 미만이거나, 필수 인증(FDA 등)이 없으면 **매칭 결과에서 자동 제외**됩니다. |
| **결과 신뢰도 표시** | 데이터가 충분하면 "높음(High)", 일부 결측이면 "보통(Medium)", 대부분 없으면 "낮음(Low)"으로 표시합니다. |
| **성공사례 보너스 정교화** | 동일 국가+유사 HS코드+최근 2년 이내 사례만 최대 보너스(10점). 국가가 다르면 보너스 0점으로 조정. |

---

### 왜 신뢰도가 좋아졌나요?

1. **실시간 데이터 우선**: KOTRA API 응답 → 캐시 → 기본값 순서로 가장 신선한 데이터 사용
2. **불법 거래 원천 차단**: 제재 대상국은 시스템 레벨에서 필터링
3. **투명한 점수 계산**: 왜 이 바이어가 1위인지 상세 breakdown 제공
4. **불확실성 명시**: 데이터가 부족할 때 "신뢰도 낮음" 경고로 과신 방지
5. **거래 가능성 사전 검증**: MOQ/인증 불일치는 매칭 전에 걸러냄

---

## 🧪 QA 테스트 케이스 안내

### 테스트가 검증하는 것

총 **18개 테스트 케이스**가 다음을 확인합니다:

| 테스트 그룹 | 검증 내용 | 예시 |
|-------------|-----------|------|
| **추천 6개** | 국가 추천이 올바르게 작동하는지 | API 실패해도 캐시로 추천 가능 |
| **매칭 6개** | 바이어-셀러 매칭 로직이 정확한지 | FDA 없는 셀러는 미국 바이어와 매칭 안 됨 |
| **시뮬레이션 6개** | 성과 예측이 합리적인지 | 북한 시뮬레이션 요청 시 에러 반환 |

### 핵심 실패/경고 케이스

| 케이스 ID | 무엇을 테스트? | 기대 결과 |
|-----------|---------------|-----------|
| REC-004 | 북한·이란이 추천에 없는지 | ✅ 목록에서 완전 제외 |
| MAT-002 | MOQ가 너무 안 맞으면? | ❌ 매칭에서 탈락 |
| MAT-003 | FDA 필수인데 없으면? | ❌ 매칭에서 탈락 |
| MAT-004 | 성공사례 국가가 다르면? | ⚠️ 보너스 0점 |
| SIM-002 | 북한 시뮬레이션 요청 | 🚫 HTTP 400 에러 |
| SIM-003 | 러시아 시뮬레이션 | ⚠️ 경고 + 10점 감점 |
| SIM-004 | 데이터 60% 결측 | ⚠️ "신뢰도 낮음" 경고 |

---

## 📊 새로운 응답 필드 설명

### 추천/매칭에 추가된 필드

```
compliance.status      → "normal" / "restricted" / "blocked"
compliance.warning     → 경고 메시지 (제한국일 때)
moq_gate_passed       → 최소주문수량 통과 여부
cert_gate_passed      → 필수 인증 통과 여부
success_bonus         → 성공사례 보너스 점수 (0~20)
```

### 시뮬레이션에 추가된 필드

```
data_coverage.confidence        → 0.0 ~ 1.0 (1.0이 최고)
data_coverage.confidence_level  → "high" / "medium" / "low" / "very_low"
data_coverage.missing_fields    → 결측된 데이터 목록
warnings[]                      → 주의 사항 목록
```

---

## ✅ 체크리스트

운영자가 확인해야 할 사항:

- [ ] 제재국(북한, 이란 등) 거래 요청이 실제로 차단되는지
- [ ] 제한국(러시아 등) 요청 시 경고 메시지가 표시되는지
- [ ] 데이터 결측 시 "신뢰도 낮음" 표시가 정상 작동하는지
- [ ] MOQ/인증 불일치 바이어가 매칭 결과에서 제외되는지
- [ ] 캐시가 정상 작동하여 API 장애 시에도 서비스 유지되는지

---

## 📞 문의

- **기술 문의**: Claude Code 팀
- **기획 검토**: QA 명세 담당자
- **운영 지원**: 플랫폼 운영팀

---

> **참고 문서**:
> - `RULES_SPEC.md` - MOQ/인증/성공사례 상세 규칙
> - `SIMULATION_SPEC.md` - 시뮬레이션 compliance/confidence 규칙
> - `TEST_CASES.md` - 전체 테스트 케이스 명세
